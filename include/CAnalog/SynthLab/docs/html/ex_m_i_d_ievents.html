<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SynthLab SDK: MIDI Note Events</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SynthLab SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ex_m_i_d_ievents.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MIDI Note Events </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SynthModule derived objects use shared resources that are created during construction if their pointers are non-null. When getting started with these objects, use the documentation and code. The object documentation will tell you where to read the rendered output, or apply audio input for processing. The sample code (SynthEngine and SynthVoice objects) will demonstrate the sequences of calls needed - this is also documented in the <a href="https://www.routledge.com/Designing-Software-Synthesizer-Plugins-in-C-With-Audio-DSP/Pirkle/p/book/9780367510466" target="_blank">synth book</a>. For sure you will need to understand the hierarchy of engine, voice, module and core as described in detail in Chapter 4 of the book. <br />
</p>
<p>In this section, we will create a set of standalone objects that we can put together as a complete minimal-synth in the next section. <br />
</p>
<h2>MIDI Events </h2>
<p>SynthLab uses a simple <b>midiEvent</b> structure to encode MIDI messages arriving from the plugin framework. The modules all expose the doNoteOn( ) and doNoteOff( ) methods. A smaller, simpler structure called <b>midiNoteEvent</b> is used to send note-on and note-off information to the modules. All SynthModules have access to incoming MIDI data in a read-only array named MidiInputData, so there is no reason for them to need generalized MIDI handlers, nor store MIDI information <b>other than</b> the note-on and note-off events, which almost always have very speicalized handlers unique to those objects. We will need to send <b>midiNoteEvent</b> structures to our stand-alone modules. The structure is simple and encodes the MIDI data bytes as uint32_t types:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>MIDINoteEvent</div><div class="line">{</div><div class="line">     <span class="keywordtype">double</span> midiPitch = 0.0;         </div><div class="line">     uint32_t midiNoteNumber = 0;    </div><div class="line">     uint32_t midiNoteVelocity = 0;  </div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// --- to get the MIDI note pitch use the function:</span></div><div class="line"><span class="keywordtype">double</span> midiPitch = <a class="code" href="group___m_i_d_i_functions.html#gad3b90b92d9aa8104d1b4fa897b5db750">midiNoteNumberToOscFrequency</a>(midiNoteNumber);</div></div><!-- fragment --><p>You can see that it requires the MIDI note pitch. There are two ways to get this value, one uses a lookup table and the other uses the <b>midiNoteNumberToOscFrequency</b> function. The function is quite fast and only needs to be called when note-events occur. It also lets you re-tune the system from the A-440 standard (default) to any A-note pitch you like (see second argument in docs). You will need to establish the midiPitch <b>prior</b> to calling the note-on and note-off handlers of any module core. This will also limit the number of function calls to <b>midiNoteNumberToOscFrequency</b> to just one per note event. After you create the LFO object, you can test it with a fake MIDI message as I do below.</p>
<p><br />
 </p><div class="image">
<img src="synthlab_4.png" alt="synthlab_4.png"/>
</div>
<p> <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">SynthLab Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="standalone.html">Standalone Programming</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>

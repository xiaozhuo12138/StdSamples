<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SynthLab SDK: Updating GUI Parameters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SynthLab SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('the_params.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Updating GUI Parameters </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If you are using the SynthEngine, you update the GUI parameters by first requesting a shared pointer to the engine's parameter structure, which will contain parameters relevant to the engine level of operation. It also contains a shared pointer to the voice parameter structure. <b>You use these two pointers directly to update all of the engine, voice and module parameters</b>. Notice that this is part of SynthLab's shared parameter paradigm that was baked into the design from the very beginning. If you don't like it, you may freely replace it with another scheme for sharing these parameters while still retaining the code for decoding MIDI and rendering note events from voices. <br />
</p>
<p>In my implementations, the ASPiK framework's processing object declares and stores these two pointers - they are guaranteed to never change during the life of the engine because my processing object (PluginCore) insantiates one and only one engine object for the life of the plugin. However, they may also be obtained on-the-fly during each GUI update phase depending on your coding preference.</p>
<div class="fragment"><div class="line"><span class="comment">// --- the engine</span></div><div class="line">std::shared_ptr&lt;SynthLab::SynthEngine&gt; synthEngine = <span class="keyword">nullptr</span>; <span class="comment">// &lt; instantiated in constuctor</span></div><div class="line"></div><div class="line"><span class="comment">// --- for GUI parameter updating</span></div><div class="line">std::shared_ptr&lt;SynthLab::SynthEngineParameters&gt; engineParameters = <span class="keyword">nullptr</span>;</div><div class="line">std::shared_ptr&lt;SynthLab::SynthVoiceParameters&gt; voiceParameters = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line"><span class="comment">// --- during initialization/instantiation of framework&#39;s processing object</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// --- get the engine parameters</span></div><div class="line">synthEngine-&gt;getParameters(engineParameters);</div><div class="line"></div><div class="line"><span class="comment">// --- get the voice parameters from the engine parameters</span></div><div class="line">voiceParameters = engineParameters-&gt;voiceParameters;</div><div class="line"></div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>With the two shared pointers in hand, you can update all of the bits and pieces of the synth, with all redundant data being shared across all identical objects. For example, it your engine has 16 voice objects in its array, and each includes an LFO named LFO1, then the LFO GUI parameters (rate, waveform, output amplitude, etc...) are common to all LFO1s in the voices. The shared parameter pointers allow access to them at once without copying pointers or copying parameter data. Here are some code fragmements showing various GUI updating for the example synths. Of course these GUI variables would be coming from your impelmentation and would likely not have the same names, so I replaced my variable names with raw numbers as examples only.</p>
<p><b>Engine Parameters</b> <br />
</p>
<div class="fragment"><div class="line"><span class="comment">// --- </span></div><div class="line">engineParameters-&gt;globalPitchBendSensCoarse = 12; <span class="comment">// --- semitones</span></div><div class="line">engineParameters-&gt;globalTuningCoarse = -8.750;    <span class="comment">// --- semitones</span></div><div class="line"></div><div class="line">engineParameters-&gt;globalUnisonDetune_Cents = 10.0; <span class="comment">// --- detuning spread in unison mode</span></div><div class="line">engineParameters-&gt;globalVolume_dB = -6.00;         <span class="comment">// -- native dB</span></div><div class="line"><span class="comment">// </span></div></div><!-- fragment --><p><b>Voice Parameters</b> <br />
</p>
<div class="fragment"><div class="line"><span class="comment">// --- </span></div><div class="line">voiceParameters-&gt;glideTime_mSec = 1000.0;   <span class="comment">// glide time from GUI</span></div><div class="line">voiceParameters-&gt;filterModeIndex = 1;       <span class="comment">// 1 = parallel filters</span></div><div class="line"></div><div class="line"><span class="comment">// </span></div></div><!-- fragment --><p><b>SynthModule Parameters</b> shared via the voice parameter struct <br />
</p>
<div class="fragment"><div class="line"><span class="comment">// --- LFO 1</span></div><div class="line">voiceParameters-&gt;lfo1Parameters-&gt;frequency_Hz = 0.25;</div><div class="line">voiceParameters-&gt;lfo1Parameters-&gt;outputAmplitude = 0.707; <span class="comment">// not dB</span></div><div class="line"></div><div class="line"><span class="comment">// filter EG</span></div><div class="line">voiceParameters-&gt;filterEGParameters-&gt;attackTime_mSec = 20.0;</div><div class="line">voiceParameters-&gt;filterEGParameters-&gt;decayTime_mSec = 250.0;</div><div class="line">voiceParameters-&gt;filterEGParameters-&gt;sustainLevel = 0.8;</div><div class="line">voiceParameters-&gt;filterEGParameters-&gt;releaseTime_mSec = 2000.0;</div><div class="line"></div><div class="line"><span class="comment">// --- oscillator output amplitudes for four member oscillators</span></div><div class="line">voiceParameters-&gt;osc1Parameters-&gt;outputAmplitude_dB = 0.0;</div><div class="line">voiceParameters-&gt;osc2Parameters-&gt;outputAmplitude_dB = +3.5;</div><div class="line">voiceParameters-&gt;osc3Parameters-&gt;outputAmplitude_dB = 0.0;</div><div class="line">voiceParameters-&gt;osc4Parameters-&gt;outputAmplitude_dB = -12.0;</div><div class="line"></div><div class="line"><span class="comment">// --- DCA</span></div><div class="line">voiceParameters-&gt;dcaParameters-&gt;ampEGIntensity = 1.0;</div><div class="line"></div><div class="line"><span class="comment">// </span></div></div><!-- fragment --><p><b>ModMatrix Parameters</b> shared via the voice parameter struct <br />
 The <a class="el" href="mod_matrix.html">Modulation Matrix</a> object's parameter structure also contains both variables and functions to allow matrix manipulation from your GUI code. These functions take modulation array index values, shown as constants here and defined in <a class="el" href="synthconstants_8h.html" title="See also Designing Software Synthesizers in C++ 2nd Ed. by Will Pirkle. ">synthconstants.h</a> for the example synths. The functions allow setting the intensity controls and enabling/disabling particular modulation routings. Here are some code fragmements showing mod matrix parameter function calls from the example synths, this time they show my GUI variable names. You access the modMatrixParameters via the voiceParameters: <br />
</p>
<p>voiceParameters-&gt;modMatrixParameters</p>
<div class="fragment"><div class="line"><span class="comment">// --- Source Intensities (could also do destination or channel intensities </span></div><div class="line"><span class="comment">//     All intensity controls are on the range [-1, +1] to allow for inversion </span></div><div class="line"><span class="comment">//     of the modulation</span></div><div class="line">modMatrixParameters-&gt;setMM_SourceIntensity(SynthLab::kSourceLFO1_Norm,     <span class="comment">/* LFO1 source array index  */</span> </div><div class="line">                                           lfo1SourceInt);                 <span class="comment">/* source intensity from GUI */</span> </div><div class="line">                                                            </div><div class="line">modMatrixParameters-&gt;setMM_SourceIntensity(SynthLab::kSourceLFO2_Norm,     <span class="comment">/* LFO2 source array index  */</span> </div><div class="line">                                           lfo2SourceInt);                 <span class="comment">/* source intensity from GUI */</span> </div><div class="line">                                           </div><div class="line">modMatrixParameters-&gt;setMM_SourceIntensity(SynthLab::kSourceFilterEG_Norm, <span class="comment">/* Filter source array index  */</span> </div><div class="line">                                           filterEGSourceInt);             <span class="comment">/* source intensity from GUI */</span> </div><div class="line">                                           </div><div class="line">modMatrixParameters-&gt;setMM_SourceIntensity(SynthLab::kSourceAuxEG_Norm,    <span class="comment">/* Aux EG source array index  */</span> </div><div class="line">                                           auxEGSourceInt);                <span class="comment">/* source intensity from GUI */</span> </div><div class="line">                                           </div><div class="line">modMatrixParameters-&gt;setMM_SourceIntensity(SynthLab::kSourceAuxEG_Bias,    <span class="comment">/* Aux EG source array index  */</span> </div><div class="line">                                           auxEGBiasedSourceInt);          <span class="comment">/* source intensity from GUI */</span> </div><div class="line"></div><div class="line"><span class="comment">// --- enable/disable mod routings from LFO1 to filter1&#39;s bipolar fc </span></div><div class="line">modMatrixParameters-&gt;setMM_ChannelEnable(SynthLab::kSourceLFO1_Norm,        <span class="comment">/* mod source array index */</span></div><div class="line">                                         SynthLab::kDestFilter1_fc_Bipolar, <span class="comment">/* mod dest array index */</span></div><div class="line">                                         enableLFO1Filter1fc);              <span class="comment">/* true/false to enable/disable */</span></div><div class="line">                                                          </div><div class="line">modMatrixParameters-&gt;setMM_ChannelEnable(SynthLab::kSourceLFO1_Norm,        <span class="comment">/* mod source array index */</span></div><div class="line">                                         SynthLab::kDestFilter2_fc_Bipolar, <span class="comment">/* mod dest array index */</span></div><div class="line">                                         enableLFO1Filter2fc);              <span class="comment">/* true/false to enable/disable */</span></div><div class="line"><span class="comment">// </span></div></div><!-- fragment --><p>Here are some things to remember and think about:</p><ul>
<li>once all updates are complete, you call the <b>setParameters( )</b> method on the engine object</li>
<li>note that the majority of your parameter adjustments occured when you wrote into the parameter member variables, directly changing their values via a smart pointer</li>
<li>the engine's setParameters() function mainly addresses engine level functionality, such as unison detuning of various voices when the user selects unison mode and makes alterations to the voice parameter's global variables</li>
<li><p class="startli">the SynthModules in the voice will be updating during the render cycle as with the standalone objects; remember that their parameter structures are shared and given to them at instantiation time</p>
<p class="startli"><br />
 </p><div class="image">
<img src="synthlab_4.png" alt="synthlab_4.png"/>
</div>
<p> <br />
 </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">SynthLab Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="synth_voice_engine.html">Engine &amp; Voice Programming</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>

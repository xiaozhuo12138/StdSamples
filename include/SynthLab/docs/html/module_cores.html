<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SynthLab SDK: ModuleCore Progamming</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SynthLab SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('module_cores.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ModuleCore Progamming </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Each <b>SynthModule</b> is capable of loading up to four (4) module cores that are subclassed from the <b>ModuleCore</b> base. However it is also important to understand that <b>SynthModules do not need to load or implement ModuleCores - they may implement their funcionality directly.</b> The DCA object is an example of a SynthModule that has no cores and that implements its functions directly in the 5 operational phase methods: <b>reset( ), update( ), render( ), doNoteOn( )</b> and <b>doNoteOff( )</b>.</p>
<p>We will first modify the LFOCore to add a new LFO waveform to it. Then, we will change one of the LFO mod knob's behavior. After that, we will design a ModuleCore from scratch to make a simple filter. <br />
</p>
<p><b>You can find the files used in this tutorial in the SynthLab_SDK/examples/programming_guide folder.</b></p>
<h2>ModuleCore Types, Names and Preferred Index Values </h2>
<p>SynthLab ModuleCore objects export three identifier variables:</p><ul>
<li>one denotes the type of module</li>
<li>another is the module name as you would like it to appear to the user</li>
<li>the last is a preferred module core index (on the range [0, 3]) that is used when the module is loaded <b>for DM synths only</b>; if you set the preferred index value to 0, then the core will also be the default core</li>
</ul>
<p>The type is required when loading dyanmic modules (mini-DLLs) in SynthLab-DM and the name is required for dynamic string loading in the advanced SynthLab projects. If you are not using these options then these identifiers do not matter but you might as well get used to setting them. SynthLab defines the following constants for the various module types:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga8c6c5cf06614c518ba9e12ee7de0833f">UNDEFINED_MODULE</a> = 0;</div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga1c24f6a5b67a157f815e7251140d0558">LFO_MODULE</a> = 1;     <span class="comment">// --- LFO </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga1e7aeecf4023ba91b592c3c60ac3c058">EG_MODULE</a> = 2;      <span class="comment">// --- EG </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#gace258dee156cc6db0390608335a772c8">DCA_MODULE</a> = 3;     <span class="comment">// --- DCA </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga11020b60ee4ccf495c3497d00de252f3">FILTER_MODULE</a> = 4;  <span class="comment">// --- Filter </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga1c5dba6e8becac1e611824f51e6c12c7">WTO_MODULE</a> = 5;     <span class="comment">// --- Wavetable Oscillator </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#gaf299ab7211251eb5f917b51b29f69a60">VAO_MODULE</a> = 6;     <span class="comment">// --- Virtual Analog Oscillator </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga0f4c05fe5d7c60cf0b7b155062c10049">FMO_MODULE</a> = 7;     <span class="comment">// --- FM Operator Oscillator </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#gaa2361cd6101716d25bd3ab006fd264f7">PCMO_MODULE</a> = 8;    <span class="comment">// --- PCM Sample Oscillator </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#ga3d1ef6070eb2b69e02a22420e4b4d3c3">KSO_MODULE</a> = 9;     <span class="comment">// --- Karplus-Strong Sample Oscillator </span></div><div class="line"><span class="keyword">const</span> uint32_t <a class="code" href="group___constants-_enums.html#gaf6eb5737d116d3083d2f9ea3f2a46798">OSC_MODULE</a> = 10;    <span class="comment">// --- General Oscillator </span></div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><h2>Module Strings </h2>
<p>Each SynthModule and ModuleCore includes a statically declared array of 16 strings called Module Strings. Either of these objects can export these strings for the user to see in a GUI control. The module strings are set in the constructor of the SynthModule or ModuleCore but we will concentrate on the core here. The module strings are used as selection items on the GUI that sets a zero-indexed parameter value when the user selects a string. For oscillators, these module strings are waveform names, for EGs they are contours (e.g. "ADSR") while for filters, they are filter types (e.g. "Moog LPF4"). <br />
</p>
<p>In the <a class="el" href="lfocore_8cpp.html" title="See also Designing Software Synthesizers in C++ 2nd Ed. by Will Pirkle. ">lfocore.cpp</a> file, you can find these string definitions, right after the module name and ID value is set.</p>
<div class="fragment"><div class="line">LFOCore::LFOCore()</div><div class="line">{</div><div class="line">     moduleType = <a class="code" href="group___constants-_enums.html#ga1c24f6a5b67a157f815e7251140d0558">LFO_MODULE</a>;</div><div class="line">     moduleName = <span class="stringliteral">&quot;ClassicLFO&quot;</span>;</div><div class="line">     preferredIndex = 0; <span class="comment">// &lt;---- ordering for user, DM only</span></div><div class="line">     </div><div class="line">     lookupTables.reset(<span class="keyword">new</span>(BasicLookupTables));</div><div class="line"></div><div class="line">     <span class="comment">// --- our LFO waveforms //&quot;clip sine&quot;;// </span></div><div class="line">     <span class="comment">/*</span></div><div class="line"><span class="comment">         Module Strings, zero-indexed for your GUI Control:</span></div><div class="line"><span class="comment">         - triangle, sine ,ramp_up, ramp_dn, exp_up, exp_dn, exp_tri, square, rand_SH1, pluck</span></div><div class="line"><span class="comment">     */</span></div><div class="line">     coreData.moduleStrings[0] = <span class="stringliteral">&quot;triangle&quot;</span>;    coreData.moduleStrings[8] = <span class="stringliteral">&quot;rand S&amp;H1&quot;</span>;</div><div class="line">     coreData.moduleStrings[1] = <span class="stringliteral">&quot;sine&quot;</span>;        coreData.moduleStrings[9] = <span class="stringliteral">&quot;pluck&quot;</span>;</div><div class="line">     coreData.moduleStrings[2] = <span class="stringliteral">&quot;ramp up&quot;</span>;     coreData.moduleStrings[10] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line">     coreData.moduleStrings[3] = <span class="stringliteral">&quot;ramp dn&quot;</span>;     coreData.moduleStrings[11] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line">     coreData.moduleStrings[4] = <span class="stringliteral">&quot;exp up&quot;</span>;      coreData.moduleStrings[12] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line">     coreData.moduleStrings[5] = <span class="stringliteral">&quot;exp dn&quot;</span>;      coreData.moduleStrings[13] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line">     coreData.moduleStrings[6] = <span class="stringliteral">&quot;exp tri&quot;</span>;     coreData.moduleStrings[14] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line">     coreData.moduleStrings[7] = <span class="stringliteral">&quot;square&quot;</span>;      coreData.moduleStrings[15] = <a class="code" href="group___constants-_enums.html#ga80e76224a09d421e5865520315cb4d84">empty_string</a>.c_str();</div><div class="line"></div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><h2>Mod Knobs and Labels </h2>
<p>Each SynthModule and ModuleCore includes a statically declared array of 4 mod knob labels. These labels are placed over the mod knob controls on the GUI. The mod knobs are known as A, B, C, and D. These labels indicate the functionality of the knob control for the user, and for programmers as well. All mod knobs output unipolar values on the range [0.0, +1.0]. Mod Knob A always initializes to the midpoint value of 0.5 while the other three initialize to 0.0. The mod knob labels are set after the module strings in the constructors. Here are the labels that complete the LFOCore constructor:</p>
<div class="fragment"><div class="line">     <span class="comment">// --- modulation control knobs</span></div><div class="line">     coreData.modKnobStrings[MOD_KNOB_A] = <span class="stringliteral">&quot;Shape&quot;</span>;</div><div class="line">     coreData.modKnobStrings[MOD_KNOB_B] = <span class="stringliteral">&quot;Delay&quot;</span>;</div><div class="line">     coreData.modKnobStrings[MOD_KNOB_C] = <span class="stringliteral">&quot;FadeIn&quot;</span>;</div><div class="line">     coreData.modKnobStrings[MOD_KNOB_D] = <span class="stringliteral">&quot;BPM Sync&quot;</span>;</div><div class="line">}</div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>There are three helper functions to allow you to map the unipolar mod knob value to a range of values with a linear, log or anti-log mapping. For example:</p>
<div class="fragment"><div class="line"><span class="comment">// --- map mod knob B value linearly from 0.0 to 100.0 (milliseconds, for a delay control)</span></div><div class="line"><span class="keywordtype">double</span> delay = <a class="code" href="group___synth_functions.html#ga69fddc8a8a4c490560530b630e945046">getModKnobValueLinear</a>(parameters-&gt;modKnobValue[MOD_KNOB_B], 0.0, 100.0);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// --- map mod knob A value logarithmically from 10.0 to 1000.0 </span></div><div class="line"><span class="keywordtype">double</span> shape = <a class="code" href="group___synth_functions.html#gae71011f7ef6917cb3d4551a52ce8a044">getModKnobValueLog</a>(parameters-&gt;modKnobValue[MOD_KNOB_A], 10.0, 1000.0);</div><div class="line"><span class="comment">//</span></div></div><!-- fragment --><p>In the next series of modules, we'll modify the LFOCore and create a brand new filtering core. In general, you should open the core's .cpp file and step through the five operational phase functions, plus the constructor and make note of what is happening in each. You will soon see that the cores all follow a nearly identical programming pattern, in part because of the adherence to the base class overrides. And, within each module type (filters, oscillators, etc...) you will see even more design patterns emerge with great similarity between the object coding.</p>
<p><b>ModuleCore Programming Guide</b></p><ul>
<li><a class="el" href="core_proc.html">The CoreProcData Structure</a></li>
<li><a class="el" href="modify_l_f_o.html">Modify the LFO Core</a></li>
<li><a class="el" href="create_osc.html">Create an Additive Oscillator Core</a></li>
</ul>
<p><br />
 </p><div class="image">
<img src="synthlab_4.png" alt="synthlab_4.png"/>
</div>
<p> <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">SynthLab Developer&#39;s Guide</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
